{"version":3,"sources":["../../src/react-redux/FindAndSubscribe.js"],"names":["PropTypes","Component","AbstractQuery","FindAndSubscribeComponent","componentDidMount","query","action","dispatch","props","_subscribe","fetchAndSubscribe","err","result","alert","componentWillUnmount","stop","render","children","propTypes","func","isRequired","instanceOf","node"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,SAApB,QAAqC,OAArC;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAEA,eAAe,MAAMC,yBAAN,SAAwCF,SAAxC,CAAkD;;AAQ/DG,sBAAoB;AAClB;AACA,QAAM,EAAEC,KAAF,EAASC,MAAT,EAAiBC,QAAjB,KAA8B,KAAKC,KAAzC;AACA,SAAKC,UAAL,GAAkBJ,MAAMK,iBAAN,CAAwB,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACzD,UAAID,GAAJ,EAAS;AACP;AACAE,cAAO,sBAAoBF,GAAI,GAA/B;AACA;AACD;;AAEDJ,eAASD,OAAOM,MAAP,EAAe,IAAf,CAAT;AACD,KARiB,CAAlB;AASD;;AAEDE,yBAAuB;AACrB;AACA,QAAI,KAAKL,UAAT,EAAqB;AACnB,WAAKA,UAAL,CAAgBM,IAAhB;AACA,aAAO,KAAKN,UAAZ;AACD;AACF;;AAEDO,WAAS;AACP,WAAO,KAAKR,KAAL,CAAWS,QAAlB;AACD;AAhC8D;AAA5Cd,yB,CACZe,S,GAAY;AACjBX,YAAUP,UAAUmB,IAAV,CAAeC,UADR;AAEjBd,UAAQN,UAAUmB,IAAV,CAAeC,UAFN;AAGjBf,SAAOL,UAAUqB,UAAV,CAAqBnB,aAArB,EAAoCkB,UAH1B;AAIjBH,YAAUjB,UAAUsB;AAJH,C","file":"FindAndSubscribe.js","sourcesContent":["import { PropTypes, Component } from 'react';\nimport AbstractQuery from '../store/AbstractQuery';\n\nexport default class FindAndSubscribeComponent extends Component {\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    action: PropTypes.func.isRequired,\n    query: PropTypes.instanceOf(AbstractQuery).isRequired,\n    children: PropTypes.node,\n  };\n\n  componentDidMount() {\n    // console.log('FindAndSubscribe: did mount');\n    const { query, action, dispatch } = this.props;\n    this._subscribe = query.fetchAndSubscribe((err, result) => {\n      if (err) {\n        // eslint-disable-next-line no-undef, no-alert\n        alert(`Unexpected error: ${err}`);\n        return;\n      }\n\n      dispatch(action(result, true));\n    });\n  }\n\n  componentWillUnmount() {\n    // console.log('FindAndSubscribe: will unmount');\n    if (this._subscribe) {\n      this._subscribe.stop();\n      delete this._subscribe;\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n"]}