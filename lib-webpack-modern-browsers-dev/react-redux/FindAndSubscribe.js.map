{"version":3,"sources":["../../src/react-redux/FindAndSubscribe.js"],"names":["PropTypes","Component","AbstractQuery","FindAndSubscribeComponent","componentDidMount","props","query","action","dispatch","_subscribe","fetchAndSubscribe","err","result","alert","componentWillUnmount","stop","render","children","propTypes","func","isRequired","instanceOf","node"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,SAApB,QAAqC,OAArC;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAEA,eAAe,MAAMC,yBAAN,SAAwCF,SAAxC,CAAkD;;AAQ/DG,sBAAoB;AAClB;AADkB,iBAEkB,KAAKC,KAFvB;AAAA,QAEVC,KAFU,UAEVA,KAFU;AAAA,QAEHC,MAFG,UAEHA,MAFG;AAAA,QAEKC,QAFL,UAEKA,QAFL;;AAGlB,SAAKC,UAAL,GAAkBH,MAAMI,iBAAN,CAAwB,CAACC,GAAD,EAAMC,MAAN,KAAiB;AACzD,UAAID,GAAJ,EAAS;AACP;AACAE,cAAO,sBAAoBF,GAAI,GAA/B;AACA;AACD;;AAEDH,eAASD,OAAOK,MAAP,EAAe,IAAf,CAAT;AACD,KARiB,CAAlB;AASD;;AAEDE,yBAAuB;AACrB;AACA,QAAI,KAAKL,UAAT,EAAqB;AACnB,WAAKA,UAAL,CAAgBM,IAAhB;AACA,aAAO,KAAKN,UAAZ;AACD;AACF;;AAEDO,WAAS;AACP,WAAO,KAAKX,KAAL,CAAWY,QAAlB;AACD;AAhC8D;AAA5Cd,yB,CACZe,S,GAAY;AACjBV,YAAUR,UAAUmB,IAAV,CAAeC,UADR;AAEjBb,UAAQP,UAAUmB,IAAV,CAAeC,UAFN;AAGjBd,SAAON,UAAUqB,UAAV,CAAqBnB,aAArB,EAAoCkB,UAH1B;AAIjBH,YAAUjB,UAAUsB;AAJH,C","file":"FindAndSubscribe.js","sourcesContent":["import { PropTypes, Component } from 'react';\nimport AbstractQuery from '../store/AbstractQuery';\n\nexport default class FindAndSubscribeComponent extends Component {\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    action: PropTypes.func.isRequired,\n    query: PropTypes.instanceOf(AbstractQuery).isRequired,\n    children: PropTypes.node,\n  };\n\n  componentDidMount() {\n    // console.log('FindAndSubscribe: did mount');\n    const { query, action, dispatch } = this.props;\n    this._subscribe = query.fetchAndSubscribe((err, result) => {\n      if (err) {\n        // eslint-disable-next-line no-undef, no-alert\n        alert(`Unexpected error: ${err}`);\n        return;\n      }\n\n      dispatch(action(result, true));\n    });\n  }\n\n  componentWillUnmount() {\n    // console.log('FindAndSubscribe: will unmount');\n    if (this._subscribe) {\n      this._subscribe.stop();\n      delete this._subscribe;\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n"]}