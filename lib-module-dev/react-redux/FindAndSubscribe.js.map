{"version":3,"sources":["../../src/react-redux/FindAndSubscribe.js"],"names":["PropTypes","Component","AbstractQuery","FindAndSubscribeComponent","props","query","action","dispatch","_subscribe","fetchAndSubscribe","err","result","alert","stop","children","propTypes","func","isRequired","instanceOf","node"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,EAAoBC,SAApB,QAAqC,OAArC;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;IAEqBC,yB;;;;;;;;;;;wCAQC;AAClB;AADkB,mBAEkB,KAAKC,KAFvB;AAAA,UAEVC,KAFU,UAEVA,KAFU;AAAA,UAEHC,MAFG,UAEHA,MAFG;AAAA,UAEKC,QAFL,UAEKA,QAFL;;AAGlB,WAAKC,UAAL,GAAkBH,MAAMI,iBAAN,CAAwB,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACzD,YAAID,GAAJ,EAAS;AACP;AACAE,uCAA2BF,GAA3B;AACA;AACD;;AAEDH,iBAASD,OAAOK,MAAP,EAAe,IAAf,CAAT;AACD,OARiB,CAAlB;AASD;;;2CAEsB;AACrB;AACA,UAAI,KAAKH,UAAT,EAAqB;AACnB,aAAKA,UAAL,CAAgBK,IAAhB;AACA,eAAO,KAAKL,UAAZ;AACD;AACF;;;6BAEQ;AACP,aAAO,KAAKJ,KAAL,CAAWU,QAAlB;AACD;;;;EAhCoDb,S,UAC9Cc,S,GAAY;AACjBR,YAAUP,UAAUgB,IAAV,CAAeC,UADR;AAEjBX,UAAQN,UAAUgB,IAAV,CAAeC,UAFN;AAGjBZ,SAAOL,UAAUkB,UAAV,CAAqBhB,aAArB,EAAoCe,UAH1B;AAIjBH,YAAUd,UAAUmB;AAJH,C;SADAhB,yB","file":"FindAndSubscribe.js","sourcesContent":["import { PropTypes, Component } from 'react';\nimport AbstractQuery from '../store/AbstractQuery';\n\nexport default class FindAndSubscribeComponent extends Component {\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    action: PropTypes.func.isRequired,\n    query: PropTypes.instanceOf(AbstractQuery).isRequired,\n    children: PropTypes.node,\n  };\n\n  componentDidMount() {\n    // console.log('FindAndSubscribe: did mount');\n    const { query, action, dispatch } = this.props;\n    this._subscribe = query.fetchAndSubscribe((err, result) => {\n      if (err) {\n        // eslint-disable-next-line no-undef, no-alert\n        alert(`Unexpected error: ${err}`);\n        return;\n      }\n\n      dispatch(action(result, true));\n    });\n  }\n\n  componentWillUnmount() {\n    // console.log('FindAndSubscribe: will unmount');\n    if (this._subscribe) {\n      this._subscribe.stop();\n      delete this._subscribe;\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n"]}