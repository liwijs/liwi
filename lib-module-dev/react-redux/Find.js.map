{"version":3,"sources":["../../src/react-redux/Find.js"],"names":["Component","PropTypes","ReactNodeType","ReduxDispatchType","AbstractQuery","FindComponent","props","query","action","dispatch","context","store","_find","fetch","result","children","contextTypes","any"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAAcC,+BAAd,EAA6BC,uCAA7B,QAAsD,uBAAtD;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;;;;;;;;AAEA,sCAAkB,WAAC,kBAAQ,OAAR,CAAD,WAAiB,OAAjB,EAAlB;AAEA,oCAAiB,SACf,uBAAU,WAAC,wBAAD,CAAV,CADe,EAEf,qBAAQ,UAAR,CAFe,EAGf,oBAAO,oBAAP,CAHe,EAIf,uBAAU,oBAAV,CAJe,CAAjB;IAOqBC,a,sBACd,S;;;;;;;;;;;;;;;;;;;wCAMe;AAAA;;AAAA,mBACQ,KAAKC,KADb;AAAA,UACVC,KADU,UACVA,KADU;AAAA,UACHC,MADG,UACHA,MADG;;AAElB,UAAMC,WAAW,KAAKH,KAAL,CAAWG,QAAX,IAAuB,KAAKC,OAAL,CAAaC,KAAb,CAAmBF,QAA3D;AACA,WAAKG,KAAL,GAAaL,MAAMM,KAAN,CAAY,UAACC,MAAD,EAAiB;AAAA,0BAAV,OAAU;;AAAA;;AACxC,YAAI,CAAC,OAAKF,KAAV,EAAiB;AACjBH,iBAASD,OAAOM,MAAP,CAAT;AACA,eAAO,OAAKF,KAAZ;AACD,OAJY,CAAb;AAKD;;;2CAEsB;AACrB,UAAI,KAAKA,KAAT,EAAgB;AACd;AACA,eAAO,KAAKA,KAAZ;AACD;AACF;;;6BAEuB;AAAA,iCAAd,oBAAc;;AACtB,gCAAO,KAAKN,KAAL,CAAWS,QAAlB;AACD;;;;EA1BwCf,S,mCACpC,S,WAEEgB,Y,GAAe;AACpBL,SAAOV,UAAUgB;AADG,C;;;;SAHHZ,a","file":"Find.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport type { ReactNodeType, ReduxDispatchType } from 'alp-react-redux/types';\nimport AbstractQuery from '../store/AbstractQuery';\n\ntype ActionType = (result: any) => any;\n\ntype PropsType = {\n  dispatch: ?ReduxDispatchType,\n  action: ActionType,\n  query: AbstractQuery,\n  children: ReactNodeType,\n};\n\nexport default class FindComponent extends Component {\n  props: PropsType;\n\n  static contextTypes = {\n    store: PropTypes.any,\n  };\n\n  componentDidMount() {\n    const { query, action } = this.props;\n    const dispatch = this.props.dispatch || this.context.store.dispatch;\n    this._find = query.fetch((result: any) => {\n      if (!this._find) return;\n      dispatch(action(result));\n      delete this._find;\n    });\n  }\n\n  componentWillUnmount() {\n    if (this._find) {\n      // this._find.cancel();\n      delete this._find;\n    }\n  }\n\n  render(): ReactNodeType {\n    return this.props.children;\n  }\n}\n"]}