{"version":3,"file":"users-node14.cjs","sources":["../src/users.ts"],"sourcesContent":["import assert from 'assert';\nimport { MongoConnection, MongoStore } from 'liwi-mongo';\n\nconst connection = new MongoConnection(\n  new Map([['database', 'liwi-mongo-example']]),\n);\n\ninterface User {\n  _id: string;\n  created: Date;\n  updated: Date;\n  firstname: string;\n  lastname: string;\n}\n\nconst users: MongoStore<User> = new MongoStore(connection, 'users');\n\n(async function main() {\n  await users.deleteMany({});\n  const allUsers = await users.findAll();\n\n  assert(allUsers.length === 0, 'Database is not empty');\n\n  const user = {\n    firstname: 'John',\n    lastname: 'Doe',\n  };\n  const insertedUser = await users.insertOne(user);\n\n  assert(insertedUser === user);\n\n  assert(insertedUser.created);\n  assert(insertedUser.updated);\n\n  await connection.close();\n  // eslint-disable-next-line unicorn/prefer-top-level-await\n})().catch((err) => {\n  console.error(err);\n  // eslint-disable-next-line unicorn/no-process-exit\n  process.exit(1);\n});\n"],"names":["connection","MongoConnection","Map","users","MongoStore","main","deleteMany","allUsers","findAll","assert","length","user","firstname","lastname","insertedUser","insertOne","created","updated","close","catch","err","console","error","process","exit"],"mappings":";;;;;;;;;AAGA,MAAMA,UAAU,GAAG,IAAIC,yBAAJ,CACjB,IAAIC,GAAJ,CAAQ,CAAC,CAAC,UAAD,EAAa,oBAAb,CAAD,CAAR,CADiB,CAAnB,CAAA;AAYA,MAAMC,KAAuB,GAAG,IAAIC,oBAAJ,CAAeJ,UAAf,EAA2B,OAA3B,CAAhC,CAAA;AAEA,CAAC,eAAeK,IAAf,GAAsB;AACrB,EAAA,MAAMF,KAAK,CAACG,UAAN,CAAiB,EAAjB,CAAN,CAAA;AACA,EAAA,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,OAAN,EAAvB,CAAA;EAEAC,eAAM,CAACF,QAAQ,CAACG,MAAT,KAAoB,CAArB,EAAwB,uBAAxB,CAAN,CAAA;AAEA,EAAA,MAAMC,IAAI,GAAG;AACXC,IAAAA,SAAS,EAAE,MADA;AAEXC,IAAAA,QAAQ,EAAE,KAAA;GAFZ,CAAA;EAIA,MAAMC,YAAY,GAAG,MAAMX,KAAK,CAACY,SAAN,CAAgBJ,IAAhB,CAA3B,CAAA;AAEAF,EAAAA,eAAM,CAACK,YAAY,KAAKH,IAAlB,CAAN,CAAA;AAEAF,EAAAA,eAAM,CAACK,YAAY,CAACE,OAAd,CAAN,CAAA;AACAP,EAAAA,eAAM,CAACK,YAAY,CAACG,OAAd,CAAN,CAAA;AAEA,EAAA,MAAMjB,UAAU,CAACkB,KAAX,EAAN,CAjBqB;AAmBtB,CAnBD,GAmBKC,CAAAA,KAnBL,CAmBYC,GAAD,IAAS;AAClBC,EAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd,EADkB;;EAGlBG,OAAO,CAACC,IAAR,CAAa,CAAb,CAAA,CAAA;AACD,CAvBD,CAAA;;"}