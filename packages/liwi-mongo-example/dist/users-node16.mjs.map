{"version":3,"file":"users-node16.mjs","sources":["../src/users.ts"],"sourcesContent":["import assert from 'assert';\nimport { MongoConnection, MongoStore } from 'liwi-mongo';\n\nconst connection = new MongoConnection(\n  new Map([['database', 'liwi-mongo-example']]),\n);\n\ninterface User {\n  _id: string;\n  created: Date;\n  updated: Date;\n  firstname: string;\n  lastname: string;\n}\n\nconst users: MongoStore<User> = new MongoStore(connection, 'users');\n\n(async function main() {\n  await users.deleteMany({});\n  const allUsers = await users.findAll();\n\n  assert(allUsers.length === 0, 'Database is not empty');\n\n  const user = {\n    firstname: 'John',\n    lastname: 'Doe',\n  };\n  const insertedUser = await users.insertOne(user);\n\n  assert(insertedUser === user);\n\n  assert(insertedUser.created);\n  assert(insertedUser.updated);\n\n  await connection.close();\n  // eslint-disable-next-line unicorn/prefer-top-level-await\n})().catch((err) => {\n  console.error(err);\n  // eslint-disable-next-line unicorn/no-process-exit\n  process.exit(1);\n});\n"],"names":["connection","MongoConnection","Map","users","MongoStore","main","deleteMany","allUsers","findAll","assert","length","user","firstname","lastname","insertedUser","insertOne","created","updated","close","catch","err","console","error","process","exit"],"mappings":";;;AAGA,MAAMA,UAAU,GAAG,IAAIC,eAAe,CACpC,IAAIC,GAAG,CAAC,CAAC,CAAC,UAAU,EAAE,oBAAoB,CAAC,CAAC,CAAC,CAC9C,CAAA;AAUD,MAAMC,KAAuB,GAAG,IAAIC,UAAU,CAACJ,UAAU,EAAE,OAAO,CAAC,CAAA;AAEnE,CAAC,eAAeK,IAAI,GAAG;AACrB,EAAA,MAAMF,KAAK,CAACG,UAAU,CAAC,EAAE,CAAC,CAAA;AAC1B,EAAA,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,OAAO,EAAE,CAAA;EAEtCC,MAAM,CAACF,QAAQ,CAACG,MAAM,KAAK,CAAC,EAAE,uBAAuB,CAAC,CAAA;AAEtD,EAAA,MAAMC,IAAI,GAAG;AACXC,IAAAA,SAAS,EAAE,MAAM;AACjBC,IAAAA,QAAQ,EAAE,KAAA;GACX,CAAA;EACD,MAAMC,YAAY,GAAG,MAAMX,KAAK,CAACY,SAAS,CAACJ,IAAI,CAAC,CAAA;AAEhDF,EAAAA,MAAM,CAACK,YAAY,KAAKH,IAAI,CAAC,CAAA;AAE7BF,EAAAA,MAAM,CAACK,YAAY,CAACE,OAAO,CAAC,CAAA;AAC5BP,EAAAA,MAAM,CAACK,YAAY,CAACG,OAAO,CAAC,CAAA;EAE5B,MAAMjB,UAAU,CAACkB,KAAK,EAAE,CAAA;AACxB;AACF,CAAC,GAAG,CAACC,KAAK,CAAEC,GAAG,IAAK;AAClBC,EAAAA,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAA;AAClB;AACAG,EAAAA,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC,CAAA;AACjB,CAAC,CAAC"}