{"version":3,"file":"users-node10.cjs.js","sources":["../src/users.ts"],"sourcesContent":["import assert from 'assert';\nimport { MongoConnection, MongoStore } from 'liwi-mongo';\n\nconst connection = new MongoConnection(\n  new Map([['database', 'liwi-mongo-example']]),\n);\n\ninterface User {\n  _id: string;\n  created: Date;\n  updated: Date;\n  firstname: string;\n  lastname: string;\n}\n\nconst users: MongoStore<User> = new MongoStore(connection, 'users');\n\n(async function main() {\n  await users.deleteMany({});\n  const allUsers = await users.findAll();\n\n  assert(allUsers.length === 0, 'Database is not empty');\n\n  const user = {\n    firstname: 'John',\n    lastname: 'Doe',\n  };\n  const insertedUser = await users.insertOne(user);\n\n  assert(insertedUser === user);\n\n  assert(insertedUser.created);\n  assert(insertedUser.updated);\n\n  connection.close();\n})().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n"],"names":["connection","MongoConnection","Map","users","MongoStore","main","deleteMany","allUsers","findAll","assert","length","user","firstname","lastname","insertedUser","insertOne","created","updated","close","catch","err","console","error","process","exit"],"mappings":";;;;;;;AAGA,MAAMA,UAAU,GAAG,IAAIC,yBAAJ,CACjB,IAAIC,GAAJ,CAAQ,CAAC,CAAC,UAAD,EAAa,oBAAb,CAAD,CAAR,CADiB,CAAnB;AAYA,MAAMC,KAAuB,GAAG,IAAIC,oBAAJ,CAAeJ,UAAf,EAA2B,OAA3B,CAAhC;AAEA,CAAC,eAAeK,IAAf,GAAsB;QACfF,KAAK,CAACG,UAAN,CAAiB,EAAjB,CAAN;QACMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,OAAN,EAAvB;EAEAC,MAAM,CAACF,QAAQ,CAACG,MAAT,KAAoB,CAArB,EAAwB,uBAAxB,CAAN;QAEMC,IAAI,GAAG;IACXC,SAAS,EAAE,MADA;IAEXC,QAAQ,EAAE;GAFZ;QAIMC,YAAY,GAAG,MAAMX,KAAK,CAACY,SAAN,CAAgBJ,IAAhB,CAA3B;EAEAF,MAAM,CAACK,YAAY,KAAKH,IAAlB,CAAN;EAEAF,MAAM,CAACK,YAAY,CAACE,OAAd,CAAN;EACAP,MAAM,CAACK,YAAY,CAACG,OAAd,CAAN;EAEAjB,UAAU,CAACkB,KAAX;CAjBF,IAkBKC,KAlBL,CAkBYC,GAAD,IAAS;EAClBC,OAAO,CAACC,KAAR,CAAcF,GAAd;EACAG,OAAO,CAACC,IAAR,CAAa,CAAb;CApBF"}