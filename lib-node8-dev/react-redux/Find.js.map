{"version":3,"sources":["../../src/react-redux/Find.js"],"names":["FindComponent","state","fetched","result","undefined","componentDidMount","query","props","_find","fetch","setState","componentWillUnmount","render","loadingComponent","createElement","component","name"],"mappings":";;;;;;;;;AAAA;;;;AACA;;AACA;;;;;;;;;;;;;;AAEA,0DAAiB,6BACf,uCAAM,8BAAN,CADe,EAEf,wCAAO,kDAAP,CAFe,EAGf,4CAAW,6CAAX,CAHe,EAIf,mDAAkB,+BAAC,6CAAD,CAAlB,CAJe,CAAjB;;IAOqBA,a,sBAAN,+BAAsC;AAAA;AAAA;;AAAA,wCAGnDC,KAHmD,GAG3C;AACNC,eAAS,KADH;AAENC,cAAQC;AAFF,KAH2C;AAAA;;AAQnDC,sBAAoB;AAClB,UAAM,EAAEC,KAAF,KAAY,KAAKC,KAAvB;AACA,SAAKC,KAAL,GAAaF,MAAMG,KAAN,CAAaN,MAAD,IAAiB;AAAA,wBAAV,2BAAU;;AAAA;;AACxC,UAAI,CAAC,KAAKK,KAAV,EAAiB;AACjB,WAAKE,QAAL,CAAc;AACZR,iBAAS,IADG;AAEZC;AAFY,OAAd;AAIA,aAAO,KAAKK,KAAZ;AACD,KAPY,CAAb;AAQD;;AAEDG,yBAAuB;AACrB,QAAI,KAAKH,KAAT,EAAgB;AACd;AACA,aAAO,KAAKA,KAAZ;AACD;AACF;;AAEDI,WAAwB;AAAA,qDAAd,wCAAc;;AACtB,QAAI,CAAC,KAAKX,KAAL,CAAWC,OAAhB,EAAyB;AACvB,gCAAO,KAAKK,KAAL,CAAWM,gBAAX,GAA8B,gBAAMC,aAAN,CAAoB,KAAKP,KAAL,CAAWM,gBAA/B,CAA9B,GAAiF,IAAxF;AACD;;AAED,8BAAO,gBAAMC,aAAN,CAAoB,KAAKP,KAAL,CAAWQ,SAA/B,EAA0C,EAAE,CAAC,KAAKR,KAAL,CAAWS,IAAZ,GAAmB,KAAKf,KAAL,CAAWE,MAAhC,EAA1C,CAAP;AACD;AAjCkD,C,qDAC9C,S;kBADcH,a","file":"Find.js","sourcesContent":["import React, { Component } from 'react';\nimport type { ReactNodeType, ReactComponentType } from 'alp-react-redux/src/types';\nimport AbstractQuery from '../store/AbstractQuery';\n\ntype PropsType = {\n  name: string,\n  query: AbstractQuery,\n  component: ReactComponentType,\n  loadingComponent: ?ReactComponentType,\n};\n\nexport default class FindComponent extends Component {\n  props: PropsType;\n\n  state = {\n    fetched: false,\n    result: undefined,\n  };\n\n  componentDidMount() {\n    const { query } = this.props;\n    this._find = query.fetch((result: any) => {\n      if (!this._find) return;\n      this.setState({\n        fetched: true,\n        result,\n      });\n      delete this._find;\n    });\n  }\n\n  componentWillUnmount() {\n    if (this._find) {\n      // this._find.cancel();\n      delete this._find;\n    }\n  }\n\n  render(): ReactNodeType {\n    if (!this.state.fetched) {\n      return this.props.loadingComponent ? React.createElement(this.props.loadingComponent) : null;\n    }\n\n    return React.createElement(this.props.component, { [this.props.name]: this.state.result });\n  }\n}\n"]}